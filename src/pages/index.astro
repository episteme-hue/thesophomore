---
import PageLayout from '../layouts/PageLayout.astro';
import Hero from '../components/Hero.astro';
import PostList from '../components/PostList.astro';
import SectionList from "../components/SectionList.astro";

import { getCollection } from "astro:content";
import { getSite } from '../utils/consts';
import Social from '../components/Social.astro';

const cv = (await getCollection("cv" as any)) as any[];
const hiddenCvSections = new Set(['education', 'teaching', 'speaking']);

const site = await getSite();
---

<PageLayout
	title={site.author.name || 'The Sophomore'}
>
	<Hero
		title={site.author.name || 'The Sophomore'}
		description={site.author.bio || 'The sophomore is Denisonâ€™s community-facing publication for the promotion and circulation of philosophical thought. We invite you to critique, discuss, and share the work you find here.'}
		role={site.author.role}
		location={site.author.location}

	/>

	<PostList
		heading="Blog"
		limit={3}
		viewAllHref="/blog"
	/>

	<Social class="mt-0" />

	            <!-- Sections (from src/content/sections.yml) -->
            {
                cv.map((section) => {
					if (hiddenCvSections.has(section.id)) return null;
                    if (section.data.items) {
                        return (
                            <SectionList
                                heading={section.data.heading}
                                items={section.data.items}
                            />
                        );
                    }
                    return null;
                })
            }
		
</PageLayout>
